> [начало](#Начало-интеграции), [платежная форма](#Шаг-1-Платежная-форма), [письмо](#Шаг-2-Письмо-об-оплате), [тестирование](#Шаг-3-Тестирование), [faq](#faq)

Интеграция оплаты к Яндекс.Кассе, email-схема
=============================================

**#инструкция для сайтов, использующих простую схему интеграции и уведомления по email**

[текстовые редакторы]: https://clck.ru/ADXZF

### Требования к интеграции
* [Зарегистрируйтесь в Яндекс.Кассе](https://money.yandex.ru/joinups/) (доступно только для юридических лиц и ИП);
* Получите от нас идентификаторы **shopId** и **scid**;
* Разместите код платежной формы на одной из страниц своего сайта или на новой странице, прописав в коде платежной формы полученные shopId и scid.

Ниже представлена пошаговая инструкция. Можно начать с создания [платежной формы](/010%20интеграция%20email.md#Шаг-1-Платежная-форма).

---

### Начало интеграции

Для начала интеграции необходимы **shopId** и **scid**. Вы получите их в письме после того, как менеджер Яндекс.Кассы выполнит процесс вашей регистрации:
> **shopId** (идентификатор магазина) = **100500**  
> **scid** (номер витрины) = **555777**  
> _это пример идентификаторов из письма_

### Шаг 1. Платежная форма

Ниже представлены примеры платежных форм в html формате (стандартная и для wix.com). Скопируйте код нужной вам формы от начала и до конца. Пропишите в форме ваши shopid и scid (в примерах указано где это нужно сделать). Вставьте созданный код в html-документ или добавьте на страницу своего сайта. Минимальная платежная форма готова.

* [стандартная](#Код-стандартной-платёжной-формы) (подходит для большинства пользователей)
* [форма для Wix](#Код-формы-для-сайтов-на-wix) (для тех, чьи сайты сделаны на основе системы wix.com)

> Выбор редактора, с помощью которого вы делаете платежную форму, на ваше усмотрение. Это может быть встроенный редактор в системе вашего сайта (wix.com, ucoz.ru), либо один из известных вам текстовых редакторов (блокнот, notepad++ и т.д.). Если требуется собственный дизайн платежной формы, обратитесь к специалистам по дизайну или верстке html. С нашей стороны нет никаких ограничений, Вы можете модифицировать текущие примеры под свои требования. 

#### Код стандартной платёжной формы
```html
<!-- Пример заголовков на странице оплаты, которые вы можете показать пользователю ======= -->
    <h2>Пример платежной страницы для оплаты товара</h2>
    <div>Стоимость товара: 1 руб.</div><hr>
    <h4>Детали заказа</h4>

<!-- Эти поля обязательные, их нельзя удалять из платежной формы ========================= -->
<!-- в полях value="" в строках shopid и scid пропишите требуемые значения                 -->
    <form action="https://money.yandex.ru/eshop.xml" method="post">
    <input required name="shopId" value="впишите-сюда-значение-своего-shopId" type="hidden"/>
    <input required name="scid" value="впишите-сюда-значение-своего-scid" type="hidden"/>
    <input required name="sum" value="" type="number" min="1" placeholder="Укажите сумму платежа">
    <!-- сумма name="sum" указана для примера (1 руб.); напишите свое значение             -->

<!-- Поле name="customerNumber" обязательное, его удалить нельзя =============================
     вы можете назвать его по своему, например вместо "Имя покупателя" написать "Идентификатор
     плательщика", "Номер клиента", "Имя клиента" или "Номер заказа" и т.д.;
     т.е. поле может иметь ваше название, но само name="customerNumber" переименовывать нельзя
     -->
     Имя покупателя (<font color="red">*</font>):<br>
     <input required name="customerNumber" value="" size="64"/><br>

<!-- Любые из этих групп строк можно убрать (если они не нужны) или переименовать ============
     например, вместо "Телефон покупателя" написать "Цвет глаз" или "Номер автомобиля"     -->
     Телефон покупателя:<br>	
     <input name="custName" value="" size="64"/><br>

     Адрес доставки:<br>	
     <input name="custAddr" value="" size="64"/><br>

     Email покупателя:<br>	
     <input name="custEmail" value="" size="64"/><br>
	
     Комментарии к заказу:<br>	
     <textarea name="orderDetails" value="" rows="5" cols="64" wrap="soft"></textarea><br>	

<!-- Кнопку "Оплатить", можно назвать по своему, например value="Оплатить за курсы вождения"
     или value="Оплатить подписку на журнал" и т.д.                                        -->
     <input type="submit" value="Оплатить">	
     </form>
```

#### Код формы для сайтов на Wix
```html
<!-- Пример заголовков на странице оплаты, которые вы можете показать пользователю ======= -->
    <h2>Пример платежной страницы для оплаты товара</h2>
    <div>Стоимость товара: 1 руб.</div><hr>
    <h4>Детали заказа</h4>

<!-- Эти поля обязательные, их нельзя удалять из платежной формы ========================= -->
<!-- в полях value="" в строках shopid и scid пропишите требуемые значения                 -->
    <form action="https://money.yandex.ru/eshop.xml" method="post" target="_blank">
    <input required name="shopId" value="впишите-сюда-значение-своего-shopId" type="hidden"/>
    <input required name="scid" value="впишите-сюда-значение-своего-scid" type="hidden"/>
    <input required name="sum" value="" type="number" min="1" placeholder="Укажите сумму платежа">
    <!-- сумма name="sum" указана для примера (1 руб.); напишите свое значение             -->

<!-- Поле name="customerNumber" обязательное, его удалить нельзя =============================
     вы можете назвать его по своему, например вместо "Имя покупателя" написать "Идентификатор
     плательщика", "Номер клиента", "Имя клиента" или "Номер заказа" и т.д.;
     т.е. поле может иметь ваше название, но само name="customerNumber" переименовывать нельзя
     -->
     Имя покупателя (<font color="red">*</font>):<br>
     <input required name="customerNumber" value="" size="64"/><br>

<!-- Любые из этих групп строк можно убрать (если они не нужны) или переименовать ============
     например, вместо "Телефон покупателя" написать "Цвет глаз" или "Номер автомобиля"     -->
     Телефон покупателя:<br>	
     <input name="custName" value="" size="64"/><br>

     Адрес доставки:<br>	
     <input name="custAddr" value="" size="64"/><br>

     Email покупателя:<br>	
     <input name="custEmail" value="" size="64"/><br>
	
     Комментарии к заказу:<br>	
     <textarea name="orderDetails" value="" rows="5" cols="64" wrap="soft"></textarea><br>	

<!-- Кнопку "Оплатить", можно назвать по своему, например value="Оплатить за курсы вождения"
     или value="Оплатить подписку на журнал" и т.д.                                        -->
     <input type="submit" value="Оплатить">	
     </form>
```

### Шаг 2. Письмо об оплате

Пример письма, которое вы получите, после того, как ваш плательщик оплатил заказ. Обратите внимание, что в письмо попадут значения следующих полей:

* `sum`, `customerNumber` (обязательно);
* `custName`, `custAddr`, `custEmail` и `orderDetails` (если их не использовать, то в письме эти поля будут не заполнены).

> Значения `custName`, `custAddr`, `custEmail` и `orderDetails` можно обыгрывать по своему. Важно понимать, что мы передаем их в письме. А что вы захотите, чтобы передавалось из вашей формы, на ваше усмотрение.

```txt
От: Yandex.Money Demo Payment Center <paymentcenter@yamoney.ru>
Кому: email адрес, который вы указали в своей технической анкете
Тема: Yandex.Dengi payment for название-вашей-организации #56

--------------------------------- Тело письма: ---------------------------------
Извещение № 56

Получатель: название-вашей-организации

Время платежа: 23.10.2016 18:24:09
Сумма: 1000.00 RUB
Номер транзакции: 2000000942259
Идентификатор клиента: (то, что плательщик напишет в поле name="customerNumber")
Номер в магазине: 2000000942259

Заполнено плательщиком в платежной форме магазина:

Ф.И.О.: значение-поля-custName-из-платежной-формы
Адрес доставки: значение-поля-custAddr-из-платежной-формы
E-mail: значение-поля-custEmail-из-платежной-формы

Содержание заказа:

значение-поля-orderDetails-из-платежной-формы
-------------------------------------------------------------------------------
```

### Шаг 3. Тестирование

Как только вы включите нашу систему оплаты на своем сайте, рекомендуем провести тестовый платеж методом Яндекс.Кошелек или картой. Внимание! Тест можно провести только реальными деньгами через любой, подключенный вашему магазину метод платежа. Для того, чтобы убедиться, что все работает, выполните платеж на 1 рубль. 

#### Ошибки при тестировании 

Если при тестировании вы получили ошибку, напишите нам, какую ошибку вы получаете и пришлите ссылку на страницу вашего сайта, на которой мы могли бы выполнить тестовую оплату самостоятельно: 

* пришлите ссылку на страницу вашего сайта, на которой мы бы могли выполнить тестовую оплату самостоятельно; 
* пришлите ссылку на страницу ошибки, которую вы получили при выполнении платежа; 
* по возможности пришлите нам данные, которые передаются из вашей платежной формы, см. инструкцию https://clck.ru/9yYy5 

---

### FAQ

#### Выставление счетов

**Q:** Хочу, чтобы посетители моего сайта получали на email письмо, в котором будет ссылка на оплату и они могли в удобное им время оплатить счет.

**A:** Обратите внимание на наш сервис выставления счетов https://yandex.ru/blog/money/11378. Оплатить заказ получатель счёта может прямо из письма, выбрав удобный способ: из электронного кошелька, с банковской карты, через интернет-банкинг, со счёта мобильного телефона или наличными — через терминалы, банкоматы и другие точки оплаты.

#### Дизайн формы оплаты

**Q:** При подключении я сообщил, что у меня нет технического специалиста и требуется, чтобы техподдержка Яндекс.Кассы помогла мне сделать платежную форму, интегрировать ее в платежный сценарий моего сайта, выполнила форму оплаты в необходимой мне стилистике и дизайне.

**A:** Если у вас нет своего специалиста, то для реализации формы оплаты на вашем сайте вам нужно обратиться к специалисту по разработке сайтов. Подобных услуг мы не оказываем.
